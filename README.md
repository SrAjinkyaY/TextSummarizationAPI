# Text Summarizer Microservice

A Spring Boot microservice that leverages Google Gemini AI to automatically summarize text content. This service demonstrates best practices including SOLID principles, dependency injection, and proper exception handling.

## Table of Contents

- [Overview](#overview)
- [Architecture](#architecture)
- [Prerequisites](#prerequisites)
- [Setup Instructions](#setup-instructions)
- [Configuration](#configuration)
- [API Endpoints](#api-endpoints)
- [SOLID Principles Implementation](#solid-principles-implementation)
- [Technologies](#technologies)

---

## Overview

The Text Summarizer microservice provides a REST API endpoint that accepts text input and returns a concise summary generated by Google Gemini AI. It includes:

- **Automatic Text Summarization**: Uses Google Gemini 2.5 Flash model for fast summarization
- **Input Validation**: Validates input requests using Jakarta validation annotations
- **Performance Metrics**: Tracks and returns processing time for each request
- **Global Exception Handling**: Centralized error handling for validation and AI provider errors
- **Configurable Prompts**: Externalized AI prompt templates via application properties

---

## Architecture

### Layered Architecture

```
┌─────────────────────────────────────────┐
│ Controller Layer                        │
│ (TextSummarizationController)           │
├─────────────────────────────────────────┤
│ Service Layer                           │
│ (TextSummarizationService/Impl)         │
├─────────────────────────────────────────┤
│ External AI Integration                 │
│ (Google Gemini ChatClient)              │
└─────────────────────────────────────────┘
```

### Key Components

| Component | Responsibility |
|-----------|-----------------|
| **Controller** | HTTP request/response handling, routing |
| **Service Interface** | Contract for business logic |
| **Service Implementation** | Summarization logic, ChatClient integration |
| **Request/Response Beans** | Data transfer objects with validation |
| **Helper Classes** | Response building, utility functions |
| **Exception Handler** | Centralized error handling and logging |
| **Configuration** | Bean setup and property management |

---

## Prerequisites

- **Java 17** or higher
- **Maven 3.6+**
- **Google API Key** (with Gemini access enabled)
- **Git** (for cloning the repository)

### Get Google API Key

1. Go to [Google AI Studio](https://aistudio.google.com/app/apikeys)
2. Create a new API key
3. Enable the Generative Language API
4. Copy your API key

---

## Setup Instructions

### 1. Clone the Repository

```bash
git clone <repository-url>
cd summarizer
```

### 2. Set Environment Variable

```bash
export GOOGLE_API_KEY=your-api-key-here
```

### 3. Build the Application

```bash
mvn clean install
```

### 4. Run the Application

```bash
mvn spring-boot:run
```

The application will start on `http://localhost:8080`

---

## Configuration

### Application Properties

Edit `application.properties`:

```properties
# Server Configuration
spring.application.name=Text Summarizer
server.port=8080

# Google Gemini Configuration
spring.ai.google.genai.api-key=${GOOGLE_API_KEY}
spring.ai.google.genai.chat.options.model=gemini-2.5-flash
spring.ai.google.genai.chat.options.temperature=0.7

# Summarization Configuration
summarization.prompt.template=Please summarize the following text:\n\n{text}
summarization.system-message=You are a helpful AI assistant. Summarize the text clearly.
```

### Configuration Parameters

| Parameter | Default | Description |
|-----------|---------|-------------|
| `server.port` | 8080 | Server port |
| `spring.ai.google.genai.api-key` | - | Google Gemini API key (required) |
| `spring.ai.google.genai.chat.options.model` | gemini-2.5-flash | AI model to use |
| `spring.ai.google.genai.chat.options.temperature` | 0.7 | Response creativity (0.0-1.0) |
| `summarization.prompt.template` | See above | AI prompt for summarization |

### AI Service Used

**Google Gemini 2.5 Flash**

- **Provider**: Google AI
- **Model**: gemini-2.5-flash
- **Features**:
  - Fast response times
  - Cost-effective
  - Supports text understanding and generation
  - Streaming and non-streaming responses
- **Integration**: Spring AI ChatClient with Google GenAI starter

---

## API Endpoints

### Summarize Text

**Endpoint**: `POST /api/v1/text/summarize`

**Content-Type**: `application/json`

#### Request Example

```json
{
  "text": "Artificial intelligence (AI) is transforming the way we work and live. From healthcare diagnostics to autonomous vehicles, AI applications are becoming increasingly prevalent. Machine learning, a subset of AI, enables systems to learn from data without being explicitly programmed. Natural Language Processing allows computers to understand and generate human language. As AI technology advances, organizations must address ethical considerations, data privacy, and workforce adaptation."
}
```

#### Response (Success - 200 OK)

```json
{
  "summarizedText": "AI is revolutionizing various sectors by enabling machines to learn from data and understand language. Key applications include healthcare diagnostics and autonomous vehicles. Ethical considerations and data privacy remain important as the technology advances.",
  "length": 186,
  "processingTime": 1250
}
```

#### Response (Validation Error - 400 Bad Request)

```json
{
  "error": "Validation Error",
  "message": "Text must not be blank",
  "code": 400
}
```

#### Response (AI Provider Error - 500 Internal Server Error)

```json
{
  "error": "AI Provider Error",
  "message": "API key invalid or rate limit exceeded",
  "provider_code": 429
}
```

### Request Validation Rules

- **text** (required): Must not be blank
- **Minimum length**: 1 character
- **Recommended length**: 50+ characters for meaningful summaries

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `summarizedText` | String | The AI-generated summary |
| `length` | Integer | Character count of the summary |
| `processingTime` | Long | Time taken to generate summary (milliseconds) |

### Example cURL Requests

**Basic request**:

```bash
curl -X POST http://localhost:8080/api/v1/text/summarize \
  -H "Content-Type: application/json" \
  -d '{"text":"Your long text here..."}'
```

**With error handling**:

```bash
curl -X POST http://localhost:8080/api/v1/text/summarize \
  -H "Content-Type: application/json" \
  -d '{"text":""}' \
  -w "\nHTTP Status: %{http_code}\n"
```

---

## SOLID Principles Implementation

This project demonstrates adherence to SOLID principles:

### Single Responsibility Principle (SRP)

Each class has one reason to change:

- **TextSummarizationController**: HTTP handling only
- **TextSummarizationServiceImpl**: Business logic only
- **SummarizationResponseBuilder**: Response building only
- **GlobalExceptionHandler**: Exception handling only

### Open/Closed Principle (OCP)

- **Open for extension**: New summarization strategies can be added via interfaces
- **Closed for modification**: AI prompts are externalized in properties
- New AI providers can be integrated without changing existing code

### Liskov Substitution Principle (LSP)

- `TextSummarizationServiceImpl` properly implements `TextSummarizationService`
- Behavior is consistent with the interface contract

### Interface Segregation Principle (ISP)

- `TextSummarizationService` contains only the necessary `summarizeText()` method
- No bloated interfaces with unused methods

### Dependency Inversion Principle (DIP)

- Constructor injection throughout (no field injection)
- Dependencies on abstractions (interfaces), not concrete classes
- Configuration externalized via `@Value` and properties

---

## Technologies

### Core Framework

- **Spring Boot**: 3.4.1
- **Spring Web**: REST endpoint handling
- **Spring AI**: 1.1.2 (ChatClient integration)
- **Spring Validation**: Jakarta Bean Validation

### AI Integration

- **Google Generative AI**: Gemini 2.5 Flash model
- **Spring AI Google GenAI Starter**: Seamless integration

### Logging

- **Log4j2**: Structured logging
- **SLF4J**: Logging facade

### Build & Dependencies

- **Maven**: Build management
- **Lombok**: Boilerplate reduction
- **JUnit 5**: Testing framework

### Java Version

- **Java 17 LTS**: Latest stable version with pattern matching and records support

---

## License

This project is open source and available under the MIT License.

## Support

For issues, feature requests, or contributions, please visit the repository or contact the development team.
